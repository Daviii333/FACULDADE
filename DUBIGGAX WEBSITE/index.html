<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <meta
      name="description"
      content="Servi√ßo de engraxate: engraxamento, polimento e cuidados com couro. Qualidade r√°pida e pre√ßo justo."
    />
    <title>Her√≥is de Verdade ‚Äî Engraxate</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ü•ø</text></svg>"
    />
    <!-- CSS  -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <header>
      <div
        class="container nav"
        role="navigation"
        aria-label="Navega√ß√£o principal"
      >
        <div class="brand">
          <img
            src="img/logo_projeto.jpeg"
            alt="Logo Her√≥is de Verdade"
            class="logo-img"
          />
          <span>Her√≥is de Verdade</span>
        </div>

        <nav>
          <ul>
            <li><a href="#inicio">In√≠cio</a></li>
            <li><a href="#servicos">Servi√ßos</a></li>
            <li><a href="#resultados ">Resultados </a></li>
            <li><a href="#contato">Contato</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="conteudo">
      <!-- HERO -->
      <section id="inicio" class="hero section">
        <div class="container grid">
          <div>
            <!-- <span class="pill">Engraxate profissional</span> -->
            <h1>
              Seu cal√ßado com brilho de primeiro ‚Äî r√°pido, caprichado e sem
              complica√ß√£o.
            </h1>
            <p>
              Engraxe, polimento e hidrata√ß√£o do couro. Atendimento local e
              delivery sob consulta.
            </p>
            <div class="cta">
              <a
                class="btn btn-primary"
                href="https://wa.me/5599999999999"
                target="_blank"
                rel="noopener"
                >üí¨ Falar no WhatsApp</a
              >
              <a class="btn btn-outline" href="tel:+55-99-9999-9999"
                >üìû Ligar agora</a
              >
            </div>
          </div>
          <!-- <div class="shoe-card" aria-hidden="true">‚ú®üëû</div> -->
        </div>
      </section>

      <!-- SOBRE -->
      <section id="sobre" class="section">
        <div class="container">
          <h2>Sobre</h2>
          <p class="muted">
            H√° mais de 10 anos cuidando de couro e camur√ßa. Produtos de
            qualidade, t√©cnica apurada e aten√ß√£o aos detalhes para prolongar a
            vida do seu cal√ßado.
          </p>
        </div>
      </section>

      <!-- SERVI√áOS -->
      <section id="servicos" class="section">
        <div class="container">
          <h2>Servi√ßos</h2>
          <div class="grid grid-4">
            <article class="card">
              <span class="badge">R√°pido</span>
              <h3>Engraxe</h3>
              <p class="muted">
                Limpeza leve e aplica√ß√£o de cera para brilho imediato.
              </p>
              <!-- <strong class="price">R$ 20</strong> -->
            </article>

            <article class="card">
              <span class="badge">Popular</span>
              <h3>Polimento Premium</h3>
              <p class="muted">Brilho espelhado com acabamento resistente.</p>
              <!-- <strong class="price">R$ 35</strong> -->
            </article>
            <article class="card">
              <span class="badge">Prote√ß√£o</span>
              <h3>Hidrata√ß√£o do Couro</h3>
              <p class="muted">
                Nutri√ß√£o do couro para evitar ressecamento e rachaduras.
              </p>
              <!-- <strong class="price">R$ 30</strong> -->
            </article>
            <article class="card">
              <span class="badge">Extra</span>
              <h3>Impermeabiliza√ß√£o</h3>
              <p class="muted">Camada protetora contra √°gua e sujeira.</p>
              <!-- <strong class="price">R$ 25</strong> -->
            </article>
          </div>
        </div>
      </section>

      <!-- RESULTADOS -->
      <section id="resultados" class="section">
        <div class="container">
          <h2>Resultados da Semana</h2>
          <p
            class="muted"
            style="text-align: center; max-width: 600px; margin: 0 auto 2rem"
          >
            Aqui voc√™ pode acompanhar o desempenho da equipe Her√≥is de Verdade ‚Äî
            n√∫mero de atendimentos, clientes satisfeitos e produtividade
            semanal.
          </p>

          <div class="charts-grid">
            <div class="chart-card">
              <h3>Atendimentos por Dia</h3>
              <canvas id="chartAtendimentos"></canvas>
            </div>

            <div class="chart-card">
              <h3>Servi√ßos mais realizados</h3>
              <canvas id="chartServicos"></canvas>
            </div>

            <div class="chart-card">
              <h3>Atendimentos por Colaborador</h3>
              <canvas id="chartColaboradores"></canvas>
            </div>

            <div class="chart-card">
              <h3>Satisfa√ß√£o dos Clientes</h3>
              <canvas id="chartSatisfacao"></canvas>
            </div>
          </div>
        </div>
      </section>

      <section id="contato" class="section contact">
        <div class="container">
          <h2>Contato</h2>
          <div class="wrap">
            <div class="panel">
              <ul class="list" aria-label="Meios de contato">
                <li>
                  <span aria-hidden="true">‚è∞</span>
                  <div>
                    <strong>Hor√°rios</strong>
                    <div class="muted">Seg a Sex 9h‚Äì18h, S√°b 9h‚Äì13h</div>
                  </div>
                </li>
                <li>
                  <span aria-hidden="true">‚òéÔ∏è</span>
                  <div>
                    <strong>Telefone</strong>
                    <div>
                      <a href="tel:+55-61-99967-0088" class="muted"
                        >(61) 9 9967-0088</a
                      >
                    </div>
                  </div>
                </li>
                <li>
                  <span aria-hidden="true">‚úâÔ∏è</span>
                  <div>
                    <strong>Email</strong>
                    <div>
                      <a
                        href="mailto:ouvidoria@heroisdeverdade.org.br"
                        class="muted"
                        >ouvidoria@heroisdeverdade.org.br</a
                      >
                    </div>
                  </div>
                </li>
              </ul>
            </div>
            <div class="panel">
              <p class="muted">Prefere falar agora?</p>
              <div class="cta">
                <a
                  class="btn btn-primary"
                  href="https://wa.me/5599999999999"
                  target="_blank"
                  rel="noopener"
                  >üí¨ WhatsApp</a
                >
                <a class="btn" href="tel:+55-99-9999-9999">üìû Ligar</a>
                <a class="btn" href="mailto:contato@exemplo.com"
                  >‚úâÔ∏è Enviar email</a
                >
              </div>
              <p style="margin-top: 1rem" class="muted">
                Atendemos tamb√©m empresas e eventos.
              </p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <small
          >¬© <span id="ano"></span> Her√≥is de Verdade ‚Äî Engraxate. Todos os
          direitos reservados.</small
        >
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      async function getSheetData() {
        // üîπ Link p√∫blico do Google Sheets (JSON)
        const sheetUrl =
          "https://docs.google.com/spreadsheets/d/1rzQvKDDTRgi8sN4TvmnE98b-6BkfoqNXlKZj6-RLLyU/gviz/tq?tqx=out:json";

        const res = await fetch(sheetUrl);
        const text = await res.text();
        const json = JSON.parse(text.substr(47).slice(0, -2));

        // Converte as linhas da planilha em arrays simples
        const rows = json.table.rows.map((r) => r.c.map((c) => c?.v));
        console.log(rows);
        return rows;
      }

      getSheetData().then((data) => {
        const registros = data.slice(1); // remove cabe√ßalho

        // --- GR√ÅFICO 1: ATENDIMENTOS POR DIA ---
        const labels = registros.map((row) => {
          const dateValue = row[10]; // coluna "Data do atendimento"
          if (!dateValue) return "Sem data";

          try {
            // caso venha no formato "Date(2025,10,18)"
            const [_, ano, mes, dia] = dateValue
              .toString()
              .match(/Date\((\d+),(\d+),(\d+)/)
              .map(Number);
            return `${dia}/${mes + 1}/${ano}`;
          } catch (err) {
            // caso venha como string normal
            return new Date(dateValue).toLocaleDateString("pt-BR");
          }
        });

        const valores = registros.map((row) => Number(row[8] || 0)); // coluna "Quantidade de atendimentos"

        const ctx1 = document.getElementById("chartAtendimentos");
        if (ctx1) {
          new Chart(ctx1, {
            type: "bar",
            data: {
              labels: labels,
              datasets: [
                {
                  label: "Atendimentos",
                  data: valores,
                  backgroundColor: [
                    "#004080",
                    "#0059b3",
                    "#0073e6",
                    "#3399ff",
                    "#66b3ff",
                  ],
                  borderRadius: 10,
                },
              ],
            },
            options: {
              responsive: true,
              animation: {
                duration: 1200,
                easing: "easeOutBounce",
              },
              plugins: {
                legend: { display: false },
                tooltip: { backgroundColor: "#003366" },
              },
              scales: { y: { beginAtZero: true } },
            },
          });
        }

        // --- GR√ÅFICO 2: SATISFA√á√ÉO DOS CLIENTES ---
        const totais = { Satisfeito: 0, Regular: 0, Insatisfeito: 0 };

        registros.forEach((row) => {
          const valor = row[9];
          if (!valor) return;
          if (typeof valor === "string") {
            if (valor.includes("Satisfeito")) totais.Satisfeito++;
            else if (valor.includes("Regular")) totais.Regular++;
            else if (valor.includes("Insatisfeito")) totais.Insatisfeito++;
          } else {
            if (valor >= 4) totais.Satisfeito++;
            else if (valor === 3) totais.Regular++;
            else totais.Insatisfeito++;
          }
        });

        const ctx2 = document.getElementById("chartSatisfacao");
        if (ctx2) {
          new Chart(ctx2, {
            type: "doughnut",
            data: {
              labels: ["Satisfeitos", "Regulares", "Insatisfeitos"],
              datasets: [
                {
                  data: [
                    totais.Satisfeito,
                    totais.Regular,
                    totais.Insatisfeito,
                  ],
                  backgroundColor: ["#003366", "#f4b400", "#cccccc"],
                },
              ],
            },
            options: {
              animation: {
                animateScale: true,
                duration: 1500,
              },
              plugins: {
                legend: { position: "bottom" },
                tooltip: { backgroundColor: "#003366" },
              },
            },
          });
        }
      });

      // --- GR√ÅFICO 3: SERVI√áOS MAIS REALIZADOS ---
      const servicos = {};

      registros.forEach((row) => {
        const tipo = row[7]; // coluna "Tipo de servi√ßo realizado"
        if (!tipo) return;
        servicos[tipo] = (servicos[tipo] || 0) + 1;
      });

      const ctx3 = document.getElementById("chartServicos");
      if (ctx3) {
        new Chart(ctx3, {
          type: "pie",
          data: {
            labels: Object.keys(servicos),
            datasets: [
              {
                data: Object.values(servicos),
                backgroundColor: [
                  "#002855",
                  "#00509e",
                  "#00a6fb",
                  "#ffd60a",
                  "#ffc300",
                  "#ff5733",
                ],
              },
            ],
          },
          options: {
            plugins: {
              legend: { position: "bottom" },
              tooltip: { backgroundColor: "#002855" },
            },
          },
        });

        // --- GR√ÅFICO 4: ATENDIMENTOS POR COLABORADOR ---
        const colaboradores = {};

        registros.forEach((row) => {
          const nome = row[5] || row[6] || "N√£o informado"; // coluna "Nome do colaborador"
          const qtd = Number(row[8] || 0); // coluna "Quantidade de atendimentos"
          colaboradores[nome] = (colaboradores[nome] || 0) + qtd;
        });

        const ctx4 = document.getElementById("chartColaboradores");
        if (ctx4) {
          new Chart(ctx4, {
            type: "bar",
            data: {
              labels: Object.keys(colaboradores),
              datasets: [
                {
                  label: "Atendimentos",
                  data: Object.values(colaboradores),
                  backgroundColor: [
                    "#003366",
                    "#0055aa",
                    "#0077cc",
                    "#0099ee",
                    "#00bbff",
                  ],
                  borderRadius: 8,
                },
              ],
            },
            options: {
              responsive: true,
              plugins: {
                legend: { display: false },
                tooltip: { backgroundColor: "#003366" },
              },
              scales: {
                x: { grid: { display: false } },
                y: { beginAtZero: true },
              },
            },
          });
        }
      }
    </script>
  </body>
</html>
